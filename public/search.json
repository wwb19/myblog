<<<<<<< HEAD
[{"title":"【项目】记Redis使用实践-介绍","url":"/2018/06/18/project-redis-s00/","content":"# 大纲\n* 一、项目背景\n* 二、数据结构\n* 三、Redis使用\n* 四、Redis数据同步\n* 五、特别场景说明\n* 六、总结优化\n\n# 感受\n  从今年的3月底，接收到一个蛮有挑战的任务，就是用redis解决目前项目的一个额度服务需求。\n  领导很简单地说了几句，用Redis就可以解决，当然我也觉得就一个内存的k-v数据库，应该也还好，就接收了这个任务。\n  接触发现，Redis涉及的面不少，不单单数据结构，还有深入需求后发现，其实数据结构也是一个很大的挑战，因为单单同步表数据，量有点大。走序列化，跟已有的技术平台不太兼容，最后只能选择重新设计数据结构，进行映射。\n  最后，经过几个月的学习研究。从一个没有接触过Redis的小白，总算折腾出了一个以Redis作为缓存的额度服务系统。希望能够分享出来。\n\n","tags":["教程"],"categories":["实践"]},{"title":"【实践】记Redis使用实践一：项目背景","url":"/2018/06/18/project-redis-s01/","content":"\n# 背景 \n作为程序员一个，多年来的工作习惯，啥都是要讲需求背景，所以直接来干货。\n这次我们涉及的是支付系统中的一个功能服务，在一家大行中提供全行的交易限额控制服务。\n其中这个额度不单单只是一维的限制，还需要根据不同的场景和对接系统，提供多个不同纬度的额度限制。\n简单概括。但是实践起来又是另一回事。\n\n# 过程\n## 划重点\n当收到需求，常习惯看一遍划重点。\n* 数据量\n* 并发量\n* 复杂度\n* 一致性\n* 多维度\n\n## 分析\n### 数据量\n存量客户数约5000千万左右。我们通过表格看看在这个基数下的不同额度的数据量。\n\n|  额度A  |  额度Ｂ  |  额度C  |\n| --- | --- | --- |\n|  基数x2  |  基数x42x6  |  基数x110 |\n|  1亿  |  一百多亿  |  几百亿  |\n当然，基本不太可能全部量都同时存在，不过基于进行评估需要，仍然以此作为评估的基数。\n\n### 并发量\n由于属于支付系统，要求的TPS是2000左右。在双11或者秒杀活动中，这个TPS可能还会进一步提升。 因此初步设计需要约5000TPS左右\n\n### 复杂度\n对于系统的需求其实比较简单，比起那些复杂的支付逻辑来说，这个还是比较简单。但是由于考虑的是系统的通用性和扩展性，这个就没法根据需求来硬编码了。\n\n### 一致性\n其实这个在数据库来说，意思就是事务一致性。因为需要对于多个额度同时进行控制，所以如何保证多个额度能一起累计或一起撤回，是考虑的重要规则之一。\n\n### 多维度\n也是基于需求背景，结合复杂度和一致性考虑，如何处理不同纬度的额度限制，并且能够具有一定的扩展性。\n\n## 设计\n有了上面的需求硬指标，我们就开始着手设计。\n主要考虑的重点就是性能和数据量\n如何在大的用户基数下也能兼顾高并发的访问性能，相信很多人都会有这个疑问。现在介绍一下我们的思路。\n### 性能\n内存存储，考虑到这么高的并发访问，而且存在高读写的要求，基于这个我们决定使用Redis作为我们数据的存储。\n\n### 数据量\n既然选择了Redis，那就从Redis开始着手进行分析解决。\n内存能不能存放这么大的数据量呢？答案是可以。不过合不合理，适不适合，又是另一件事了。\n在Redis的设计中，有几个通用的规范，来减少内存的开销。\n* 避免大key\n* 避免key和val过长\n* 尽量使用ziplist数据结构\n\n# 总结\n基本介绍了项目的背景和设计所需考虑的一些关键点，下一章节将详细说明一下数据结构。\n\n","tags":["教程"],"categories":["实践"]}]
=======
[{"title":"【记Redis使用实践】分享","url":"/2018/06/18/redis-s00/","content":"# 大纲\n* 一、项目背景\n* 二、数据结构\n* 三、Redis使用\n* 四、Redis数据同步\n* 五、特别场景说明\n* 六、总结优化\n\n# 感受\n  从今年的3月底，接收到一个蛮有挑战的任务，就是用redis解决目前项目的一个额度服务需求。\n  领导很简单地说了几句，用Redis就可以解决，当然我也觉得就一个内存的k-v数据库，应该也还好，就接收了这个任务。\n  接触发现，Redis涉及的面不少，不单单数据结构，还有深入需求后发现，其实数据结构也是一个很大的挑战，因为单单同步表数据，量有点大。走序列化，跟已有的技术平台不太兼容，最后只能选择重新设计数据结构，进行映射。\n  最后，经过几个月的学习研究。从一个没有接触过Redis的小白，总算折腾出了一个以Redis作为缓存的额度服务系统。希望能够分享出来。","tags":["教程"]},{"title":"【记Redis使用实践一】项目背景","url":"/2018/06/18/redis-s01/","content":"\n# 背景 \n作为程序员一个，多年来的工作习惯，啥都是要讲需求背景，所以直接来干货。\n这次我们涉及的是一个支付系统中的一个功能服务，在一家大行中提供全行的交易额度限制服务。\n其中额度不单单只是一维的限制，还需要根据不同的场景和对接系统，提供多个不同纬度的额度限制。\n简单概括。但是实践起来又是另一回事。\n\n# 过程\n## 划重点\n当收到需求，常习惯看一遍划重点。\n* 数据量\n* 并发量\n* 复杂度\n* 一致性\n* 多维度\n\n## 分析\n### 数据量\n存量客户数约5000千万左右。我们通过表格看看在这个基数下的不同额度的数据量。\n\n|  额度A  |  额度Ｂ  |  额度C  |\n| --- | --- | --- |\n|  2  |  42x6  |  6x18x110 |\n|  1亿  |  一百多亿  |  上千亿  |\n当然，基本不太可能全部量都同时存在，不过基于进行评估需要，仍然以此作为评估的基数。\n\n### 并发量\n由于属于支付系统，要求的TPS是2000左右。在双11或者秒杀活动中，这个TPS可能还会进一步提升。 因此初步设计需要约5000TPS左右\n\n### 复杂度\n对于系统的需求其实比较简单，比起那些复杂的支付逻辑来说，这个还是比较简单。但是由于考虑的是系统的通用性和扩展性，这个就没法根据需求来硬编码了。\n\n### 一致性\n其实这个在数据库来说，意思就是事务一致性。因为需要对于多个额度同时进行控制，所以如何保证多个额度能一起累计或一起撤回，是考虑的重要规则之一。\n\n### 多维度\n也是基于需求背景，结合复杂度和一致性考虑，如何处理不同纬度的额度限制，并且能够具有一定的扩展性。\n\n## 设计\n有了上面的需求硬指标，我们就开始着手设计。\n主要考虑的重点就是性能和数据量\n如何在大的用户基数下也能兼顾高并发的访问性能，相信很多人都会有这个疑问。现在介绍一下我们的思路。\n### 性能\n内存存储，考虑到这么高的并发访问，而且存在高读写的要求，基于这个我们决定使用Redis作为我们数据的存储。\n\n### 数据量\n既然选择了Redis，那就从Redis开始着手进行分析解决。\n内存能不能存放这么大的数据量呢？答案是可以。不过合不合理，适不适合，又是另一件事了。\n在Redis的设计中，有几个通用的规范，来减少内存的开销。\n* 避免大key\n* 避免key和val过长\n* 尽量使用ziplist数据结构\n\n# 总结\n基本介绍了项目的背景和设计所需考虑的一些关键点，下一章节将详细说明一下数据结构。","tags":["教程"]},{"title":"我的第一个父亲节","url":"/2018/06/17/2018-06-18-blog/","content":"\n# 新生命的到来\n作为一个新进奶爸，第一个父亲对于我来说，就多了一个身份，即是孩子，也是父亲。\n![](http://oxigzlivh.bkt.clouddn.com/15292965985482.jpg)\n\n## 变化\n### 衣\n现在衣服，总量也许已经比我多得多咯。啊哈哈，有专门的一个大衣柜，还有床底的位置都已经放满了衣服。而且只是一岁左右的衣服，他奶奶每次逛街都会买。还有大哥哥姐姐给，哈哈哈。都可以开店咯。\n### 食\n食的方面还好，就是由于老婆只能吃清淡的，需要喂母乳，所以一切 串串小龙虾啊，她都要远离，而且还是吃吃吃。\n### 住\n住的话，就是离不开睡觉呗，摇摇床，婴儿专用的床垫啊，还有BB床，一应俱全。至于睡那一张，就看他喜爱了。哈哈哈。他最爱睡就是我们的手臂。那叫一个酸啊。\n### 行\n出行对于新生儿来说，的确是一个大工程。BB车，爸爸袋，一大堆要准备的。初学奶爸，经常忘记带东西，特别是奶瓶。被吐槽好几回咯。还有热水、45度的常温水～～～好咯，小本本跟上。\n# 两个心脏的距离\n## 喜\n的确，多了一个孩子是一件喜事。各种话题聊天都是离不开孩子的事。欢喜的是，孩子最重要是健健康康，欢欢乐乐就满足了。\n## 怒\n这个是怒，哈，都不知道是 孩子的怒，还是作为父母的怒。的确很多时候很想发火，不过，心里总是压着压着。想起一句话，自己生的娃，怎么也得认了吧。哈哈哈。\n孩子，一个就是饿，一个就是困。哭得最厉害。解决这个问题啊，孩子一笑，好像一切的怒火都没了。好咯，也许这就是作为父母的最无可奈何的地方吧。\n## 哀\n何来哀，还不是孩子的健康成长。各种担心，各种害怕。一惊一咋。不过先好多了，熟悉了孩子的脾性，也知道很多时候是怎么一回事，不会像刚刚一样，措手不及啊。\n## 乐\n孩子带来家里的笑声更多了。\n孩子的笑声，还有逗着孩子玩的笑声，满屋子都是。\n\n\n","tags":["生活"]},{"title":"Welcome on WWB1984","url":"/1984/08/08/hello-world/","content":"\n# Welcome My World\n首先，欢迎大家到来。\n这是第一篇的文章，后续我会继续在这里分享。\n当你看到里面的每一段文字，也是我们不同平行线上的交集。是幸运、更是幸福。\n希望能够珍惜彼此短短的交集。\n谢谢。\n\n## 声明：\n1、不要当键盘侠，前提。本人玻璃心受不了。\n2、有错就认，欢迎提出。\n3、版权相关，请标明出处。\n","tags":["博客"]}]
>>>>>>> parent of 0c8ccba... 20180805
